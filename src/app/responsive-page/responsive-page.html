<!-- Financial Dashboard -->
<div class="financial-dashboard" dir="rtl">
  
  <!-- Header Progress Stages (Desktop) -->
  <div class="stages-header-desktop d-none d-md-block">
    <div class="container-fluid">
      <div class="stages-container">
        @for (stage of stages(); track stage.id; let i = $index) {
          <div class="stage-item">
            <div class="stage-content desktop-layout">
              <div class="stage-title">{{ stage.title }}</div>
              <div class="stage-icon-wrapper">
                <div class="stage-icon" [class]="'stage-' + stage.status">
                  {{ stage.icon }}
                </div>
              </div>
            </div>
            @if (i < stages().length - 1) {
              <div class="stage-connector" [class]="stage.status === 'completed' ? 'completed' : ''"></div>
            }
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Header Progress Stages (Mobile) -->
  <div class="stages-header-mobile d-md-none">
    <div class="container-fluid">
      <div class="stages-container-mobile">
        @for (stage of stages(); track stage.id; let i = $index) {
          <div class="stage-item-mobile">
            <div class="stage-content mobile-layout">
              <div class="stage-icon-wrapper">
                <div class="stage-icon" [class]="'stage-' + stage.status">
                  {{ stage.icon }}
                </div>
              </div>
              <div class="stage-title">{{ stage.title }}</div>
            </div>
            @if (i < stages().length - 1) {
              <div class="stage-connector-mobile" [class]="stage.status === 'completed' ? 'completed' : ''"></div>
            }
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Mobile Tab Navigation (Mobile Only) -->
  <div class="mobile-tab-nav d-md-none">
    <div class="container-fluid px-2 py-2">
      <div class="row no-gutters">
        <div class="col-3 text-center">
          <div class="tab-item">
            <div class="tab-icon"></div>
            <small>住住拽转</small>
          </div>
        </div>
        <div class="col-3 text-center">
          <div class="tab-item">
            <div class="tab-icon"></div>
            <small>专祝 专</small>
          </div>
        </div>
        <div class="col-3 text-center">
          <div class="tab-item">
            <div class="tab-icon"></div>
            <small>专住</small>
          </div>
        </div>
        <div class="col-3 text-center">
          <div class="tab-item active">
            <div class="tab-icon"></div>
            <small>拽 2</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Section Title -->
  <div class="section-title-area">
    <div class="container-fluid">
      <div class="title-row">
        <h2 class="section-title">住 转砖</h2>
        <span class="yellow-label">
          <span class="clock-icon"></span>
          09:15
        </span>
      </div>
    </div>
  </div>

  <!-- Main Content Container -->
  <div class="container-fluid p-3">
    
    <!-- Desktop Layout -->
    <div class="desktop-layout d-none d-md-block">
      <!-- Single Horizontal Balance Card -->
      <div class="desktop-balance-card">
        <div class="balance-content">
          <div class="balance-top-section">
            <div class="balance-amount">{{ formatAmount(currentBalance()) }}</div>
            <div class="balance-label">转专 转</div>
            <div class="balance-sublabel">砖 </div>
            <div class="balance-details">
              <div class="detail-row">
                <span class="detail-label">+ 140.00</span>
                <span class="detail-value">转 转专 1</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">- 96.00</span>
                <span class="detail-value"> 转专 2</span>
              </div>
            </div>
          </div>
          <div class="balance-bottom-section">
            <div class="total-amount">{{ formatAmount(totalBalance()) }}</div>
            <div class="total-label">住  砖转</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Layout -->
    <div class="mobile-layout d-md-none">
      
      <!-- Transactions List -->
      <div class="mobile-transactions">
        @for (transaction of transactions(); track transaction.id) {
          <div class="mobile-transaction-item">
            <div class="transaction-left">
              <div class="transaction-icon">
                <div class="status-dot" [class]="getStatusClass(transaction.status)"></div>
              </div>
              <div class="transaction-info">
                <div class="transaction-date">{{ transaction.date }}</div>
                <div class="transaction-desc">{{ transaction.description }}</div>
                <div class="transaction-reference">{{ transaction.reference }}</div>
              </div>
            </div>
            <div class="transaction-right">
              <div class="transaction-amount" [class]="transaction.type === 'credit' ? 'positive' : 'negative'">
                {{ formatAmount(transaction.amount) }}
              </div>
              <div class="transaction-status">
                <span class="status-badge" [class]="getStatusClass(transaction.status)"></span>
              </div>
            </div>
          </div>
        }
      </div>

      <!-- Mobile Summary Card -->
      <div class="mobile-summary">
        <div class="summary-content">
          <div class="summary-left">
            <div class="summary-text">住 </div>
            <div class="summary-subtext">砖转</div>
          </div>
          <div class="summary-right">
            <div class="summary-amount">{{ formatAmount(totalBalance()) }}</div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
