<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Todos by User ID</h3>
      </div>
      <div class="card-body">
        <div class="mb-4">
          <label for="userIdInput" class="form-label">
            User ID (1-10):
          </label>
          <input 
            id="userIdInput"
            type="number"
            class="form-control"
            min="1" 
            max="10"
            [value]="userId()"
            (input)="onUserIdChange($any($event.target).value)"
            placeholder="Enter user ID (1-10)"
            aria-describedby="userIdHelp userIdError"
            [class.is-invalid]="validationError()">
          <div id="userIdHelp" class="form-text">
            Enter a user ID between 1 and 10 to load their todos.
          </div>
          @if (validationError()) {
            <div id="userIdError" class="invalid-feedback" role="alert" aria-live="polite">
              {{ validationError() }}
            </div>
          }
        </div>

        @if (loading()) {
          <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status" aria-label="Loading todos">
              <span class="visually-hidden">Loading todos...</span>
            </div>
          </div>
        } @else if (error()) {
          <div class="alert alert-danger" role="alert" aria-live="polite">
            {{ error() }}
          </div>
        } @else if (todos().length > 0) {
          <div class="todos-grid">
            <div class="row">
              @for (todo of todos(); track trackByTodoId($index, todo)) {
                <div class="col-lg-6 col-xl-4 mb-3">
                  <div class="card h-100">
                    <div class="card-body d-flex flex-column">
                      <div class="d-flex align-items-start mb-2">
                        <div class="todo-status me-3">
                          @if (todo.completed) {
                            <span class="completed-todo" aria-label="Completed">
                              <i class="text-success fs-4">✓</i>
                            </span>
                          } @else {
                            <span class="pending-todo" aria-label="Pending">
                              <i class="text-danger fs-4">✗</i>
                            </span>
                          }
                        </div>
                        <div class="flex-grow-1">
                          <h6 class="card-title" 
                              [class]="todo.completed ? 'completed-todo' : 'pending-todo'">
                            {{ todo.title }}
                          </h6>
                        </div>
                      </div>
                      <div class="mt-auto">
                        <span class="badge" 
                              [class]="todo.completed ? 'bg-success' : 'bg-danger'">
                          {{ todo.completed ? 'Completed' : 'Pending' }}
                        </span>
                        <small class="text-muted d-block mt-1">
                          Todo ID: {{ todo.id }}
                        </small>
                      </div>
                    </div>
                  </div>
                </div>
              }
            </div>
          </div>

          <div class="mt-3">
            <div class="row">
              <div class="col-sm-6">
                <p class="text-muted mb-0">
                  Total todos: {{ todos().length }}
                </p>
              </div>
              <div class="col-sm-6">
                <p class="text-muted mb-0">
                  Completed: {{ getCompletedCount() }} / 
                  Pending: {{ getPendingCount() }}
                </p>
              </div>
            </div>
          </div>
        } @else if (userId()) {
          <div class="text-center text-muted">
            No todos found for user ID {{ userId() }}.
          </div>
        } @else {
          <div class="text-center text-muted">
            Enter a user ID above to load their todos.
          </div>
        }
      </div>
    </div>
  </div>
</div>
